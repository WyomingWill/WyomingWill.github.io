<html>
<head>
<title>flock</title>
<style type="text/css">
<!--
/*
    This style sheet is borrowed from the NetLogo User Manual.  However, some of the units were
    changed from em to px because Java's StyleSheet support is limited for relative units such as
    em and % (this will supposively improve with newer versions of the VM) - jrn 7/21/05
    BE VERY VERY CAREFUL when you alter this style sheet -- it's possible to put in
    innocent-looking things that work on some VM's but cause Java exceptions on other for example
    we were using "font-size: 125%" but it caused Java exceptions on Java 1.5 on Windows - ST
    8/25/05
*/
:link { color: rgb(110,0,110); }
:visited { color: rgb(110,0,110); }
body {
    margin-left: 5px;
    font-family: arial, sans-serif;
    background: white;
    font-size: 12pt
}
h1 {
    color: white;
    background: rgb(45,0,45);
    font-size: 18pt;
    margin-bottom: 4px;
    padding-left: 6px;
    padding-right: 6px;
    padding-top: 6px;
    padding-bottom: 6px;
}
h2 {
    margin-top: 15px;
    margin-left: 6px;
    margin-bottom: 4px;
    background: rgb(166,172,255);
    font-size: 15pt;
    padding-left: 6px;
    padding-right: 6px;
    padding-top: 6px;
    padding-bottom: 6px;
}
h3 {
    margin-top: 15px;
    margin-left: 13px;
    margin-bottom: 4px;
    background: rgb(175,175,175);
    font-size: 12pt;
    padding: 0.2em;
    padding-left: 6px;
    padding-right: 6px;
    padding-top: 6px;
    padding-bottom: 6px;
}
h4 {
    margin-top: 15px;
    margin-bottom: 5px;
    margin-left: 15px;
    font-size: 12pt;
}
h5 {
    margin-top: 15px;
    margin-left: 15px;
    font-size: 12pt;
}
h6 {
    margin-top: 15px;
    margin-left: 15px;
    font-size: 12pt;
}
p {
    margin-left: 15px;
    margin-bottom: 3px;
}
pre {
    margin-left: 13px;
    background: rgb(225,225,225);
    font-family: monospace;
    font-size: 12pt;
    padding-left: 10px;
    padding-right: 3px;
    padding-top: 7px;
    padding-bottom: 7px;
    margin-top:9px;
    margin-bottom:0px;
}
code {
    font-family: monospace;
    font-size: 12pt;
}
blockquote {
    border: solid;
    border-style: solid;
    border-width: thin;
    border-color: black;
    background: rgb(250,250,220);
    padding-top: 0px;
    padding-bottom: 7px;
    margin-top: 7px;
    margin-bottom:1px;
}
ol {
   margin-bottom:1px;
}
ul {
   margin-bottom:1px;
}

-->
</style>
</head>
<body>

<p>This page was automatically generated by NetLogo 5.0.</p>

<p>The applet requires Java 5 or higher.
Java must be enabled in your browser settings.
Mac users must have Mac OS X 10.4 or higher.
Windows and Linux users may obtain the latest Java from
<a href="http://java.sun.com/getjava/download.html">Sun's Java site</a>.</p>

<p><hr>

<applet code="org.nlogo.lite.Applet"
        archive="NetLogoLite.jar"
        width="783" height="548">
  <param name="DefaultModel"
         value="flock.nlogo">
  <param name="java_arguments"
         value="-Djnlp.packEnabled=true">
</applet>
</p>

<p>powered by
<a target="_blank" href="http://ccl.northwestern.edu/netlogo/">NetLogo</a></p>

<p>view/download model file:
<a href="flock.nlogo">flock.nlogo</a></p>
<h2>WHAT IS IT?</h2><p>This model is an attempt to mimic the flocking of birds (also called &ldquo;boids&rdquo;). The resulting motion also resembles schools of fish. The flocks that appear in this model are not created or led in any way by special leader birds. Rather, each bird is following exactly the same set of rules, from which flocks emerge.</p><p>[Note by William M. Spears - these comments are from the original NetLogo version, with a few minor edits.]</p><h2>HOW IT WORKS</h2><p>The birds follow three rules: &ldquo;alignment,&rdquo; &ldquo;separation&rdquo; and &ldquo;cohesion.&rdquo;</p><p>&ldquo;Alignment&rdquo; means that a bird tends to turn so that it is moving in the same direction that nearby birds are moving.</p><p>&ldquo;Separation&rdquo; means that a bird will turn to avoid another bird which gets too close.</p><p>&ldquo;Cohesion&rdquo; means that a bird will move towards other nearby birds (unless another bird is too close).</p><p>When two birds are too close, the &ldquo;separation&rdquo; rule overrides the other two, which are deactivated until the minimum separation is achieved.</p><p>The three rules affect only the bird&rsquo;s heading. Each bird always moves forward at the same constant speed.</p><h2>HOW TO USE IT</h2><p>First, determine the number of birds you want in the simulation and set the NUMBER_OF_BOIDS slider to that value. </p><p>Click SETUP AGENTS to create the birds, and click MOVE AGENTS to have them start flying around.</p><p>The default settings for the sliders will produce reasonably good flocking behavior. However, you can play with them to get variations.</p><p>Three MAX_TURN sliders control the maximum angle a bird can turn as a result of each rule.</p><p>VISION is the distance that each bird can see 360 degrees around it.</p><h2>THINGS TO NOTICE</h2><p>Central to the model is the observation that flocks form without a leader.</p><p>There are no random numbers used in this model, except to position the birds initially. The fluid, lifelike behavior of the birds is produced entirely by deterministic rules.</p><p>Also, notice that each flock is dynamic. A flock, once together, is not guaranteed to keep all of its members. Why do you think this is?</p><p>Using the default settings, after running the model for a while, all of the birds have approximately the same heading. Why?</p><p>Sometimes a bird breaks away from its flock. Why does this happen? You may need to slow down the model or run it step by step in order to observe this phenomenon.</p><h2>THINGS TO TRY</h2><p>Play with the sliders to see if you can get tighter flocks, looser flocks, fewer flocks, more flocks, more or less splitting and joining of flocks, more or less rearranging of birds within flocks, etc.</p><p>You can turn off a rule entirely by setting that rule&rsquo;s angle slider to zero. Is one rule by itself enough to produce at least some flocking? What about two rules? What&rsquo;s missing from the resulting behavior when you leave out each rule?</p><p>Will running the model for a long time produce a static flock? Or will the birds never settle down to an unchanging formation? Remember, there are no random numbers used in this model.</p><h2>EXTENDING THE MODEL</h2><p>Currently the birds can &ldquo;see&rdquo; all around them. What happens if birds can only see in front of them? The IN-CONE primitive can be used for this.</p><p>Is there some way to get V-shaped flocks, like migrating geese?</p><p>What happens if you put walls around the edges of the world that the birds can&rsquo;t fly into?</p><p>Can you get the birds to fly around obstacles in the middle of the world?</p><p>What would happen if you gave the birds different velocities? For example, you could make birds that are not near other birds fly faster to catch up to the flock. Or, you could simulate the diminished air resistance that birds experience when flying together by making them fly faster when in a group.</p><p>Are there other interesting ways you can make the birds different from each other? There could be random variation in the population, or you could have distinct &ldquo;species&rdquo; of bird.</p><p>[Again, in order to change any NetLogo simulation, you must have the source code (i.e., &ldquo;flock.nlogo&rdquo;) downloaded to your computer, as well as NetLogo itself. You can not change the code when you are running the simulation with your browser.]</p><h2>NETLOGO FEATURES</h2><p>Notice the need for the SUBTRACT-HEADINGS primitive and special procedure for averaging groups of headings. Just subtracting the numbers, or averaging the numbers, doesn&rsquo;t give you the results you&rsquo;d expect, because of the discontinuity where headings wrap back to 0 once they reach 360.</p><p>[Note by William M. Spears - this is explained in more detail in Chapter 3 of the book.]</p><h2>RELATED MODELS</h2><p>Moths<br/>Flocking Vee Formation</p><h2>CREDITS AND REFERENCES</h2><p>This model is inspired by the Boids simulation invented by Craig Reynolds. The algorithm we use here is roughly similar to the original Boids algorithm, but it is not the same. The exact details of the algorithm tend not to matter very much &ndash; as long as you have alignment, separation, and cohesion, you will usually get flocking behavior resembling that produced by Reynolds&rsquo; original model. Information on Boids is available at <a href="http://www.red3d.com/cwr/boids/">http://www.red3d.com/cwr/boids/</a>.</p><h2>HOW TO CITE</h2><p>If you mention this model in an academic publication, we ask that you include these citations for the model itself and for the NetLogo software:<br/>- Wilensky, U. (1998). NetLogo Flocking model. <a href="http://ccl.northwestern.edu/netlogo/models/Flocking">http://ccl.northwestern.edu/netlogo/models/Flocking</a>. Center for Connected Learning and Computer-Based Modeling, Northwestern University, Evanston, IL.<br/>- Wilensky, U. (1999). NetLogo. <a href="http://ccl.northwestern.edu/netlogo/">http://ccl.northwestern.edu/netlogo/</a>. Center for Connected Learning and Computer-Based Modeling, Northwestern University, Evanston, IL.</p><p>In other publications, please use:<br/>- Copyright 1998 Uri Wilensky. All rights reserved. See <a href="http://ccl.northwestern.edu/netlogo/models/Flocking">http://ccl.northwestern.edu/netlogo/models/Flocking</a> for terms of use.</p><h2>COPYRIGHT NOTICE</h2><p>Copyright 1998 Uri Wilensky. All rights reserved.</p><p>Permission to use, modify or redistribute this model is hereby granted, provided that both of the following requirements are followed:<br/>a) this copyright notice is included.<br/>b) this model will not be redistributed for profit without permission from Uri Wilensky. Contact Uri Wilensky for appropriate licenses for redistribution for profit.</p><p>This model was created as part of the project: CONNECTED MATHEMATICS: MAKING SENSE OF COMPLEX PHENOMENA THROUGH BUILDING OBJECT-BASED PARALLEL MODELS (OBPML). The project gratefully acknowledges the support of the National Science Foundation (Applications of Advanced Technologies Program) &ndash; grant numbers RED #9552950 and REC #9632612.</p><p>This model was converted to NetLogo as part of the projects: PARTICIPATORY SIMULATIONS: NETWORK-BASED DESIGN FOR SYSTEMS LEARNING IN CLASSROOMS and/or INTEGRATED SIMULATION AND MODELING ENVIRONMENT. The project gratefully acknowledges the support of the National Science Foundation (REPP &amp; ROLE programs) &ndash; grant numbers REC #9814682 and REC-0126227. Converted from StarLogoT to NetLogo, 2002.</p>

<h1>CODE</h1>
<pre><font color="#5a5a5a">; Flocking Tutorial Code</font><font color="#000000">
</font><font color="#5a5a5a">; Based on original model by Uri Wilenksy at</font><font color="#000000">
</font><font color="#5a5a5a">; http://ccl.northwestern.edu/netlogo/models/Flocking</font><font color="#000000">
</font><font color="#5a5a5a">; with modifications by William M. Spears September 2011</font><font color="#000000">
</font><font color="#5a5a5a">; For research and educational use only</font><font color="#000000">

</font><font color="#007f69">globals</font><font color="#000000"> [h0 h1 h2 h3 h4 h5 hh]                   </font><font color="#5a5a5a">; For the histogram</font><font color="#000000">

</font><font color="#007f69">turtles-own</font><font color="#000000"> [hood them r min_r deltax deltay newh bearing nearest-neighbor]

</font><font color="#5a5a5a">; Called by &quot;Setup Agents&quot;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> setup
   </font><font color="#0000aa">clear-all</font><font color="#000000">                                     </font><font color="#5a5a5a">; Clear everything</font><font color="#000000">
                                                 </font><font color="#5a5a5a">; Create the boids and initialize them</font><font color="#000000">
   </font><font color="#0000aa">crt</font><font color="#000000"> Number_of_Boids [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">1.5</font><font color="#000000"> </font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">random-xcor</font><font color="#000000"> </font><font color="#660096">random-ycor</font><font color="#000000">]
   </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> them [</font><font color="#660096">who</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">other</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000">] </font><font color="#5a5a5a">; Find out the IDs of all other boids</font><font color="#000000">
   
   setup-plot
   </font><font color="#0000aa">set</font><font color="#000000"> h0 </font><font color="#963700">0</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> h1 </font><font color="#963700">0</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> h2 </font><font color="#963700">0</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> h3 </font><font color="#963700">0</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> h4 </font><font color="#963700">0</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> h5 </font><font color="#963700">0</font><font color="#000000">
   </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> [monitor]
   do-plot
   </font><font color="#0000aa">reset-ticks</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#5a5a5a">; Called forever by &quot;Move Agents&quot;</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> go
   </font><font color="#0000aa">if</font><font color="#000000"> (</font><font color="#660096">count</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) [</font><font color="#0000aa">user-message</font><font color="#000000"> </font><font color="#963700">&quot;Please click HALT and then SETUP AGENTS first&quot;</font><font color="#000000"> </font><font color="#0000aa">stop</font><font color="#000000">]
   </font><font color="#0000aa">set</font><font color="#000000"> h0 </font><font color="#963700">0</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> h1 </font><font color="#963700">0</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> h2 </font><font color="#963700">0</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> h3 </font><font color="#963700">0</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> h4 </font><font color="#963700">0</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> h5 </font><font color="#963700">0</font><font color="#000000">
   </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> [flock]
   do-plot
   </font><font color="#0000aa">tick</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#5a5a5a">; Original NetLogo code, modified by William M. Spears</font><font color="#000000">
</font><font color="#5a5a5a">; For further explanation see Chapter 3 of the book</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> flock
   find-neighbors
   </font><font color="#0000aa">if</font><font color="#000000"> ((</font><font color="#660096">length</font><font color="#000000"> hood) </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">) [
      </font><font color="#0000aa">ifelse</font><font color="#000000"> (min_r </font><font color="#660096">&lt;</font><font color="#000000"> Minimum_Separation)
         [separation]
         [alignment cohesion]
   ]
   monitor
   </font><font color="#0000aa">fd</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#5a5a5a">; Originally &quot;find-flockmates&quot;, rewritten by William M. Spears</font><font color="#000000">
</font><font color="#5a5a5a">; Loop through all other boids, and find those</font><font color="#000000">
</font><font color="#5a5a5a">; within vision range and the boid closest to you.</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> find-neighbors
   </font><font color="#0000aa">set</font><font color="#000000"> min_r </font><font color="#963700">100000</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> hood []
   </font><font color="#0000aa">foreach</font><font color="#000000"> them [
      </font><font color="#0000aa">set</font><font color="#000000"> deltax (([</font><font color="#660096">xcor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> ?) </font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">xcor</font><font color="#000000">)
      </font><font color="#0000aa">if</font><font color="#000000"> ((</font><font color="#660096">abs</font><font color="#000000"> deltax) </font><font color="#660096">&lt;=</font><font color="#000000"> Vision) [              </font><font color="#5a5a5a">; Yields speed improvement</font><font color="#000000">
         </font><font color="#0000aa">set</font><font color="#000000"> deltay (([</font><font color="#660096">ycor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> ?) </font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">ycor</font><font color="#000000">)
         </font><font color="#0000aa">set</font><font color="#000000"> r </font><font color="#660096">sqrt</font><font color="#000000"> (deltax </font><font color="#660096">*</font><font color="#000000"> deltax </font><font color="#660096">+</font><font color="#000000"> deltay </font><font color="#660096">*</font><font color="#000000"> deltay)
         </font><font color="#0000aa">if</font><font color="#000000"> (r </font><font color="#660096">&lt;=</font><font color="#000000"> Vision) [
            </font><font color="#0000aa">set</font><font color="#000000"> hood (</font><font color="#660096">fput</font><font color="#000000"> ? hood)               </font><font color="#5a5a5a">; Update list of boids within vision range</font><font color="#000000">
            </font><font color="#0000aa">if</font><font color="#000000"> (r </font><font color="#660096">&lt;</font><font color="#000000"> min_r) [
               </font><font color="#0000aa">set</font><font color="#000000"> min_r r
               </font><font color="#0000aa">set</font><font color="#000000"> nearest-neighbor ?            </font><font color="#5a5a5a">; This is the boid closest to you</font><font color="#000000">
            ]
         ]
      ]
   ]
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#5a5a5a">; Separation - original NetLogo code</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> separation
   turn-away ([</font><font color="#660096">heading</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> nearest-neighbor) Max_Separation_Turn
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#5a5a5a">; Alignment, rewritten by William M. Spears</font><font color="#000000">
</font><font color="#5a5a5a">; For further explanation see Chapter 3 of the book</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> alignment
   </font><font color="#0000aa">let</font><font color="#000000"> x </font><font color="#963700">0</font><font color="#000000"> </font><font color="#0000aa">let</font><font color="#000000"> y </font><font color="#963700">0</font><font color="#000000">        
   </font><font color="#0000aa">foreach</font><font color="#000000"> hood [
       </font><font color="#0000aa">set</font><font color="#000000"> y (y </font><font color="#660096">+</font><font color="#000000"> (</font><font color="#660096">sin</font><font color="#000000"> ([</font><font color="#660096">heading</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> ?)))
       </font><font color="#0000aa">set</font><font color="#000000"> x (x </font><font color="#660096">+</font><font color="#000000"> (</font><font color="#660096">cos</font><font color="#000000"> ([</font><font color="#660096">heading</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> ?)))
   ]
   </font><font color="#0000aa">ifelse</font><font color="#000000"> ((x </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">) </font><font color="#660096">and</font><font color="#000000"> (y </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">)) 
      [</font><font color="#0000aa">set</font><font color="#000000"> newh </font><font color="#660096">heading</font><font color="#000000">]
      [</font><font color="#0000aa">set</font><font color="#000000"> newh (</font><font color="#660096">atan</font><font color="#000000"> y x)]
   turn-towards newh Max_Alignment_Turn
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#5a5a5a">; Cohesion, rewritten by William M. Spears</font><font color="#000000">
</font><font color="#5a5a5a">; For further explanation see Chapter 3 of the book</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> cohesion
   </font><font color="#0000aa">let</font><font color="#000000"> x </font><font color="#963700">0</font><font color="#000000"> </font><font color="#0000aa">let</font><font color="#000000"> y </font><font color="#963700">0</font><font color="#000000"> </font><font color="#0000aa">let</font><font color="#000000"> b </font><font color="#963700">0</font><font color="#000000">
   </font><font color="#0000aa">foreach</font><font color="#000000"> hood [
       </font><font color="#0000aa">set</font><font color="#000000"> deltax (([</font><font color="#660096">xcor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> ?) </font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">xcor</font><font color="#000000">)
       </font><font color="#0000aa">set</font><font color="#000000"> deltay (([</font><font color="#660096">ycor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> ?) </font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">ycor</font><font color="#000000">)
       </font><font color="#0000aa">set</font><font color="#000000"> b (</font><font color="#660096">atan</font><font color="#000000"> deltax deltay)
       </font><font color="#0000aa">set</font><font color="#000000"> y y </font><font color="#660096">+</font><font color="#000000"> (</font><font color="#660096">sin</font><font color="#000000"> b)
       </font><font color="#0000aa">set</font><font color="#000000"> x x </font><font color="#660096">+</font><font color="#000000"> (</font><font color="#660096">cos</font><font color="#000000"> b)
   ]  
   </font><font color="#0000aa">ifelse</font><font color="#000000"> ((x </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">) </font><font color="#660096">and</font><font color="#000000"> (y </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">)) 
      [</font><font color="#0000aa">set</font><font color="#000000"> bearing </font><font color="#660096">heading</font><font color="#000000">]
      [</font><font color="#0000aa">set</font><font color="#000000"> bearing (</font><font color="#660096">atan</font><font color="#000000"> y x)]
   turn-towards bearing Max_Cohesion_Turn
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#5a5a5a">; Helper Procedures from NetLogo</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> turn-towards [new-heading max-turn]
   turn-at-most (</font><font color="#660096">subtract-headings</font><font color="#000000"> new-heading </font><font color="#660096">heading</font><font color="#000000">) max-turn
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> turn-away [new-heading max-turn]
   turn-at-most (</font><font color="#660096">subtract-headings</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> new-heading) max-turn
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#5a5a5a">; Turn right by &quot;turn&quot; degrees (or left if &quot;turn&quot; is negative),</font><font color="#000000">
</font><font color="#5a5a5a">; but never turn more than &quot;max-turn&quot; degrees</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> turn-at-most [turn max-turn]
   </font><font color="#0000aa">ifelse</font><font color="#000000"> (</font><font color="#660096">abs</font><font color="#000000"> turn </font><font color="#660096">&gt;</font><font color="#000000"> max-turn)
      [</font><font color="#0000aa">ifelse</font><font color="#000000"> (turn </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">)
          [</font><font color="#0000aa">rt</font><font color="#000000"> max-turn]
          [</font><font color="#0000aa">lt</font><font color="#000000"> max-turn]
      ]
      [</font><font color="#0000aa">rt</font><font color="#000000"> turn]
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#5a5a5a">;;;;;;;;;;;;;;;;; For the histogram ;;;;;;;;;;;;;;;;;;;;;;</font><font color="#000000">
</font><font color="#5a5a5a">; Used to update the histogram bins and to make the boids the </font><font color="#000000">
</font><font color="#5a5a5a">; same color as the corresponding bin, by William M. Spears</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> monitor
   </font><font color="#0000aa">let</font><font color="#000000"> h (</font><font color="#660096">floor</font><font color="#000000"> (</font><font color="#660096">heading</font><font color="#000000"> </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">60</font><font color="#000000">))
   </font><font color="#0000aa">ifelse</font><font color="#000000"> (h </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">) [</font><font color="#0000aa">set</font><font color="#000000"> h0 h0 </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">pink</font><font color="#000000">] [
      </font><font color="#0000aa">ifelse</font><font color="#000000"> (h </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) [</font><font color="#0000aa">set</font><font color="#000000"> h1 h1 </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">green</font><font color="#000000">] [
         </font><font color="#0000aa">ifelse</font><font color="#000000"> (h </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) [</font><font color="#0000aa">set</font><font color="#000000"> h2 h2 </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">blue</font><font color="#000000">] [  
            </font><font color="#0000aa">ifelse</font><font color="#000000"> (h </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">3</font><font color="#000000">) [</font><font color="#0000aa">set</font><font color="#000000"> h3 h3 </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">violet</font><font color="#000000">] [
               </font><font color="#0000aa">ifelse</font><font color="#000000"> (h </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">4</font><font color="#000000">) [</font><font color="#0000aa">set</font><font color="#000000"> h4 h4 </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">red</font><font color="#000000">] [
                  </font><font color="#0000aa">ifelse</font><font color="#000000"> (h </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">5</font><font color="#000000">) [</font><font color="#0000aa">set</font><font color="#000000"> h5 h5 </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">orange</font><font color="#000000">] []
   ]]]]]
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#5a5a5a">; Setup the histogram, by William M. Spears</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> setup-plot
   </font><font color="#0000aa">set-current-plot</font><font color="#000000"> </font><font color="#963700">&quot;Histogram of Heading&quot;</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#5a5a5a">; A histogram using pens of different colors, by William M. Spears</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> do-plot
   </font><font color="#0000aa">clear-plot</font><font color="#000000">
   </font><font color="#0000aa">set-plot-x-range</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#963700">360</font><font color="#000000">
   </font><font color="#0000aa">set-plot-y-range</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#660096">count</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000">

   </font><font color="#0000aa">set-current-plot-pen</font><font color="#000000"> </font><font color="#963700">&quot;pen0&quot;</font><font color="#000000">
   </font><font color="#0000aa">plotxy</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> h0
   </font><font color="#0000aa">set-current-plot-pen</font><font color="#000000"> </font><font color="#963700">&quot;pen1&quot;</font><font color="#000000">
   </font><font color="#0000aa">plotxy</font><font color="#000000"> </font><font color="#963700">60</font><font color="#000000"> h1
   </font><font color="#0000aa">set-current-plot-pen</font><font color="#000000"> </font><font color="#963700">&quot;pen2&quot;</font><font color="#000000">
   </font><font color="#0000aa">plotxy</font><font color="#000000"> </font><font color="#963700">120</font><font color="#000000"> h2
   </font><font color="#0000aa">set-current-plot-pen</font><font color="#000000"> </font><font color="#963700">&quot;pen3&quot;</font><font color="#000000">
   </font><font color="#0000aa">plotxy</font><font color="#000000"> </font><font color="#963700">180</font><font color="#000000"> h3
   </font><font color="#0000aa">set-current-plot-pen</font><font color="#000000"> </font><font color="#963700">&quot;pen4&quot;</font><font color="#000000">
   </font><font color="#0000aa">plotxy</font><font color="#000000"> </font><font color="#963700">240</font><font color="#000000"> h4
   </font><font color="#0000aa">set-current-plot-pen</font><font color="#000000"> </font><font color="#963700">&quot;pen5&quot;</font><font color="#000000">
   </font><font color="#0000aa">plotxy</font><font color="#000000"> </font><font color="#963700">300</font><font color="#000000"> h5
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#5a5a5a">; Copyright 1998 Uri Wilensky. All rights reserved.</font><font color="#000000">
</font><font color="#5a5a5a">; The full copyright notice is in the Information tab.</font>
</pre>

</body>
</html>
