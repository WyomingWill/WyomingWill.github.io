<html>
<head>
<title>solar_system</title>
<style type="text/css">
<!--
  :link { color: rgb(110, 0, 110); } 
  :visited { color: rgb(110, 0, 110); } 
  body { margin-left: 5px; font-family: arial, sans-serif; 
         background: white; font-size: 12pt } 
  h2 { background: rgb(166,172,255); 
       font-size: 15pt; 
       padding-left: 6px; padding-right: 6px; padding-top: 6px; 
       padding-bottom: 6px; } 
  p { margin-left: 10px; } 
  pre { margin-left: 13px; background: rgb(225,225,225); 
        font-family: monospace; padding-left: 3px; padding-right: 3px; 
        padding-top: 3px; padding-bottom: 3px; } 
-->
</style>
</head>
<body>

<p>This page was automatically generated by NetLogo 4.1.3.</p>

<p>The applet requires Java 5 or higher.
Java must be enabled in your browser settings.
Mac users must have Mac OS X 10.4 or higher.
Windows and Linux users may obtain the latest Java from
<a href="http://java.sun.com/getjava/download.html">Sun's Java site</a>.</p>

<p>
<applet code="org.nlogo.lite.Applet"
        archive="NetLogoLite.jar"
        width="777" height="682">
  <param name="DefaultModel"
         value="solar_system.nlogo">
</applet>
</p>

<p>powered by
<a target="_blank" href="http://ccl.northwestern.edu/netlogo/">NetLogo</a></p>

<p>view/download model file:
<a href="solar_system.nlogo">solar_system.nlogo</a>
</p>
<h2>WHAT IS IT?</h2>
<p>This is a model of a simple solar system with one sun and one planet, for the book entitled &quot;Physicomimetics: Physics-Based Swarm Intelligence.&quot;</p><br>
<h2>HOW IT WORKS</h2>
<p>Two particles use F = ma and Newton's gravitational force law to simulate a planet orbiting a sun.  The sun has a much higher mass than the planet.</p><br>
<h2>HOW TO USE IT</h2>
<p>Click SETUP AGENTS to initialize the sun and planet, and click MOVE AGENTS to have them move. The sun is the yellow dot and the planet is the white dot.</p>
<p>The ANGULAR_MOTION slider allows you to impart a spin to the system at initialization, causing the planet to orbit the sun. The amount of ANGULAR_MOTION has a very large impact on the shape of the orbit. The spin is established very carefully to make sure that there is no linear momentum at initialization. Changing this slider while the simulation is running will have no effect.</p>
<p>The MASS_OF_SUN slider allows you to control the mass of the sun (the planet has a mass of one). This slider is continually monitored, so moving the slider while the simulation is running will affect the simulation.</p>
<p>All other sliders will affect the simulation when it is running.</p><br>
<h2>THINGS TO NOTICE</h2>
<p>This simulation serves to teach you a simple model of a solar system, as well as to continue with more advanced topics, such the Conservation of Linear and Angular Momenta and the Conservation of Energy. This is covered in detail in Chapter 2 of the book. </p>
<p>There is no random component to this code, so it will run the same way each time, if you don't change the settings. </p>
<p>There are additional monitors in this simulation.  One computes the current total energy of the system.  Another displays the velocity of the planet.  The third shows the magnitude of the force on the planet.</p>
<p>This simulation introduces two new sliders, FORCE_MAXIMUM and VELOCITY_MAXIMUM, to reflect that when working with robots, they can only achieve some maximum velocity.  When using a 1/r^2 force law, the force can potentially go to infinity, creating velocities that no real robot can obtain. But what if the robot can't go that fast? How should we deal with that? We investigate two ways: (1) limiting the velocity, and (2) limiting the force.</p>
<p>Note how lowering the TIME_STEP causes the total energy monitor to fluctuate less, indicating that the Conservation of Energy is holding better.  In the graph, the total energy is shown in brown, the kinetic energy is in green, and the potential energy is in blue. The total energy stays relatively constant while there is a constant tradeoff between potential and kinetic energy. This is best seen when FORCE_MAXIMUM is set to one and ANGULAR_MOTION is set to 10. Watch the simulation - when is kinetic energy high? When is potential energy high? </p>
<p>The red dot in the simulation shows the center of mass of the system. If the Conservation of Linear Momentum holds in both the x- and y-dimensions the red dot will not move. The graph shows that the linear momenta stay extremely close to zero, which is what we should expect if the system is programmed properly. This simulation also includes a monitor for the Angular Momentum and you will see that it does not change over time.  If, however, the planet crosses the boundary of the world (re-entering from the other side) the conservation laws can be broken, because the standard physics assumption of an Euclidean geometry no longer holds (as explained in Chapter 2).</p><br>
<h2>THINGS TO TRY</h2>
<p>See how the GRAVITATIONAL_CONSTANT changes behavior. </p>
<p>Try different values of ANGULAR_MOMENTUM (even zero). </p>
<p>Change the FORCE_MAXIMUM and VELOCITY_MAXIMUM. What happens? </p>
<p>What if you change the MASS_OF_SUN?</p>
<p>It is somewhat hard to set the sliders so that you get orbits that stay within the graphics pane.  If you are running the simulation on your computer directly (by using &quot;solar_system.nlogo&quot;) you can increase the pane size by clicking on &quot;settings&quot; and then increasing max-pxcor and max-pycor.</p><br>
<h2>EXTENDING THE MODEL</h2>
<p>Introduce a second planet. How difficult is it to create a stable solar system?</p>
<p>Note, in order to change any NetLogo simulation, you must have the source code (i.e., &quot;solar_system.nlogo&quot;) downloaded to your computer, as well as NetLogo itself. You can not change the code when you are running the simulation with your browser.</p><br>
<h2>NETLOGO FEATURES</h2>
<p>Since we are using a patch size of one, we wanted the particles to be more visible. This is done with &quot;set size 5&quot; in the code. However, they are still considered to be point particles (with no size) in the simulation.</p>
<p>This simulation introduces the &quot;pen down&quot; (pd) command to draw the orbit of the planet. You could make a similar change to the &quot;spring2D&quot; simulation also, if you want. The new CLEAR button allows you to erase this orbit.  </p>
<p>Note how the &quot;do-plots&quot; procedure draws the Energy graph and the Momenta graph.</p>
<p>Now we can see why we didn't use the built-in NetLogo commands to model springs. By modeling springs from first principles, it was trivial to change the previous two-dimensional spring model to use Newton's gravitational force law instead of Hooke's spring law. Working from first principles allows us to have more flexibility in what we are modeling.</p><br>
<h2>RELATED MODELS</h2>
<p>This is our third simulation, which builds on the two-dimensional spring model. It will be generalized more and more throughout the book.</p><br>
<h2>CREDITS AND REFERENCES</h2>
<p>For a similar analysis of potential energy, see:</p>
<p>Spears, W. M., Spears, D. F., Hamann, J., and Heil, R. (2004) Distributed, physics-based control of swarms of vehicles. Autonomous Robots, 17 (2-3).</p><br>
<h2>HOW TO CITE</h2>
<p>If you mention this model in an academic publication, we ask that you include these citations for the model itself and for the NetLogo software:<br>- Spears, William M. and Spears, Diana F. (eds.) Physicomimetics: Physics-Based Swarm Intelligence, Springer-Verlag, (2011).<br>- Wilensky, U. (1999). NetLogo. <a href="http://ccl.northwestern.edu/netlogo/">http://ccl.northwestern.edu/netlogo/</a>. Center for Connected Learning and Computer-Based Modeling, Northwestern University, Evanston, IL.</p><br>
<h2>COPYRIGHT NOTICE</h2>
<p>Copyright 2011 William M. Spears. All rights reserved.</p>
<p>Permission to use, modify or redistribute this model is hereby granted, provided that both of the following requirements are followed:<br>a) this copyright notice is included, and<br>b) this model will not be redistributed for profit without permission from William M. Spears. Contact William M. Spears for appropriate licenses for redistribution for profit.</p>
<p><a href="http://www.swarmotics.com">http://www.swarmotics.com</a></p><br>
<h2>PROCEDURES</h2>
<pre><font color="#5a5a5a">; William M. Spears September 2011</font><font color="#000000">
</font><font color="#5a5a5a">; Solar System Tutorial Code</font><font color="#000000">
</font><font color="#5a5a5a">; For research and educational use only</font><font color="#000000">

</font><font color="#007f69">globals</font><font color="#000000"> [total_lmx total_lmy total_angular_mom total_ke total_pe total_energy 
         FMAX VMAX center_of_mass_x center_of_mass_y rprime G DeltaT S]

</font><font color="#007f69">turtles-own</font><font color="#000000"> [hood deltax deltay r F Fx Fy v vx vy dvx dvy mass ke 
             lmx lmy theta lever_arm_x lever_arm_y lever_arm_r angular_mom]

</font><font color="#007f69">to</font><font color="#000000"> setup
   </font><font color="#0000aa">clear-all</font><font color="#000000">                                   </font><font color="#5a5a5a">; Clear everything</font><font color="#000000">
   </font><font color="#0000aa">crt</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">                                       </font><font color="#5a5a5a">; Create two turtles (particles)</font><font color="#000000">
   update-info

   </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> [setup-turtles]                 </font><font color="#5a5a5a">; Set up the two particles</font><font color="#000000">
                                               </font><font color="#5a5a5a">; Compute initial separation</font><font color="#000000">
   </font><font color="#0000aa">set</font><font color="#000000"> S </font><font color="#660096">sqrt</font><font color="#000000"> (((([</font><font color="#660096">xcor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) </font><font color="#660096">-</font><font color="#000000"> ([</font><font color="#660096">xcor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">)) </font><font color="#660096">*</font><font color="#000000"> 
                (([</font><font color="#660096">xcor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) </font><font color="#660096">-</font><font color="#000000"> ([</font><font color="#660096">xcor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">))) </font><font color="#660096">+</font><font color="#000000"> 
               ((([</font><font color="#660096">ycor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) </font><font color="#660096">-</font><font color="#000000"> ([</font><font color="#660096">ycor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">)) </font><font color="#660096">*</font><font color="#000000"> 
                (([</font><font color="#660096">ycor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) </font><font color="#660096">-</font><font color="#000000"> ([</font><font color="#660096">ycor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">))))
   
                                               </font><font color="#5a5a5a">; Computes center of mass and displays location</font><font color="#000000">
   </font><font color="#0000aa">set</font><font color="#000000"> center_of_mass_x (([mass] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">) </font><font color="#660096">*</font><font color="#000000"> ([</font><font color="#660096">xcor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">) </font><font color="#660096">+</font><font color="#000000"> 
                         ([mass] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) </font><font color="#660096">*</font><font color="#000000"> ([</font><font color="#660096">xcor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">)) </font><font color="#660096">/</font><font color="#000000"> 
                        (([mass] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">) </font><font color="#660096">+</font><font color="#000000"> ([mass] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">))
   </font><font color="#0000aa">set</font><font color="#000000"> center_of_mass_y (([mass] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">) </font><font color="#660096">*</font><font color="#000000"> ([</font><font color="#660096">ycor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">) </font><font color="#660096">+</font><font color="#000000"> 
                         ([mass] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) </font><font color="#660096">*</font><font color="#000000"> ([</font><font color="#660096">ycor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">)) </font><font color="#660096">/</font><font color="#000000"> 
                        (([mass] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">) </font><font color="#660096">+</font><font color="#000000"> ([mass] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">))
   </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patch</font><font color="#000000"> (</font><font color="#660096">round</font><font color="#000000"> center_of_mass_x) (</font><font color="#660096">round</font><font color="#000000"> center_of_mass_y)
      [</font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">in-radius</font><font color="#000000"> </font><font color="#963700">4</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">red</font><font color="#000000">]]
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> run-and-monitor
   </font><font color="#0000aa">if</font><font color="#000000"> (</font><font color="#660096">count</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) [</font><font color="#0000aa">user-message</font><font color="#000000"> </font><font color="#963700">&quot;Please click HALT and then SETUP AGENTS first&quot;</font><font color="#000000"> </font><font color="#0000aa">stop</font><font color="#000000">]
   update-info
   </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> [ap]
   </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> [move]
                                               </font><font color="#5a5a5a">; Computes center of mass and displays location</font><font color="#000000">
   </font><font color="#0000aa">set</font><font color="#000000"> center_of_mass_x (([mass] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">) </font><font color="#660096">*</font><font color="#000000"> ([</font><font color="#660096">xcor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">) </font><font color="#660096">+</font><font color="#000000"> 
                         ([mass] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) </font><font color="#660096">*</font><font color="#000000"> ([</font><font color="#660096">xcor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">)) </font><font color="#660096">/</font><font color="#000000"> 
                        (([mass] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">) </font><font color="#660096">+</font><font color="#000000"> ([mass] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">))
   </font><font color="#0000aa">set</font><font color="#000000"> center_of_mass_y (([mass] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">) </font><font color="#660096">*</font><font color="#000000"> ([</font><font color="#660096">ycor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">) </font><font color="#660096">+</font><font color="#000000"> 
                         ([mass] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) </font><font color="#660096">*</font><font color="#000000"> ([</font><font color="#660096">ycor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">)) </font><font color="#660096">/</font><font color="#000000"> 
                        (([mass] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">) </font><font color="#660096">+</font><font color="#000000"> ([mass] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">))
   </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patch</font><font color="#000000"> (</font><font color="#660096">round</font><font color="#000000"> center_of_mass_x) (</font><font color="#660096">round</font><font color="#000000"> center_of_mass_y)
      [</font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">in-radius</font><font color="#000000"> </font><font color="#963700">4</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">red</font><font color="#000000">]]

   </font><font color="#0000aa">set</font><font color="#000000"> total_lmx </font><font color="#660096">sum</font><font color="#000000"> [lmx] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000">          </font><font color="#5a5a5a">; Total linear momentum, x-component</font><font color="#000000">
   </font><font color="#0000aa">set</font><font color="#000000"> total_lmy </font><font color="#660096">sum</font><font color="#000000"> [lmy] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000">          </font><font color="#5a5a5a">; Total linear momentum, y-component</font><font color="#000000">
   </font><font color="#0000aa">set</font><font color="#000000"> total_angular_mom </font><font color="#660096">sum</font><font color="#000000"> [angular_mom] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000">
   </font><font color="#0000aa">set</font><font color="#000000"> total_ke </font><font color="#660096">sum</font><font color="#000000"> [ke] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000">            </font><font color="#5a5a5a">; Total kinetic energy of both particles</font><font color="#000000">
   
   </font><font color="#5a5a5a">; The following code is used to calculate the potential energy of the system</font><font color="#000000">
   </font><font color="#5a5a5a">; The paper mentioned in the References of the Information tab provides a similar</font><font color="#000000">
   </font><font color="#5a5a5a">; derivation of potential energy</font><font color="#000000">
   </font><font color="#0000aa">set</font><font color="#000000"> rprime </font><font color="#660096">sqrt</font><font color="#000000"> (G </font><font color="#660096">*</font><font color="#000000"> ([mass] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">) </font><font color="#660096">*</font><font color="#000000"> ([mass] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) </font><font color="#660096">/</font><font color="#000000"> FMAX)
   </font><font color="#0000aa">ifelse</font><font color="#000000"> (S </font><font color="#660096">&gt;=</font><font color="#000000"> rprime)
      [</font><font color="#0000aa">set</font><font color="#000000"> total_pe ((G </font><font color="#660096">*</font><font color="#000000"> ([mass] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">) </font><font color="#660096">*</font><font color="#000000"> ([mass] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) </font><font color="#660096">*</font><font color="#000000"> ((</font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">/</font><font color="#000000"> rprime) </font><font color="#660096">-</font><font color="#000000"> (</font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">/</font><font color="#000000"> S))) </font><font color="#660096">+</font><font color="#000000">
                     (FMAX </font><font color="#660096">*</font><font color="#000000"> rprime))]
      [</font><font color="#0000aa">set</font><font color="#000000"> total_pe (FMAX </font><font color="#660096">*</font><font color="#000000"> S)]

   </font><font color="#0000aa">set</font><font color="#000000"> total_energy (total_ke </font><font color="#660096">+</font><font color="#000000"> total_pe)      </font><font color="#5a5a5a">; Total energy of two particle system</font><font color="#000000">
   </font><font color="#0000aa">tick</font><font color="#000000">
   do-plots
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> setup-turtles
   </font><font color="#0000aa">home</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;circle&quot;</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">5</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> vx </font><font color="#963700">0</font><font color="#000000"> </font><font color="#5a5a5a">; Start with no x motion on either particle</font><font color="#000000">
   
   </font><font color="#0000aa">ifelse</font><font color="#000000"> (</font><font color="#660096">who</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">)                            </font><font color="#5a5a5a">; To allow for unequal masses of the two particles</font><font color="#000000">
      [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">yellow</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> mass Mass_of_Sun </font><font color="#0000aa">set</font><font color="#000000"> vy ((</font><font color="#660096">-</font><font color="#000000"> Angular_Motion) </font><font color="#660096">/</font><font color="#000000"> Mass_of_Sun)]
      [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">white</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">xcor</font><font color="#000000"> </font><font color="#963700">15</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> mass </font><font color="#963700">1</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> vy Angular_Motion </font><font color="#0000aa">pd</font><font color="#000000">]
   </font><font color="#0000aa">set</font><font color="#000000"> theta </font><font color="#963700">0</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> ap                                          </font><font color="#5a5a5a">; Run artificial physics</font><font color="#000000">
   </font><font color="#0000aa">if</font><font color="#000000"> (</font><font color="#660096">who</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">) [</font><font color="#0000aa">set</font><font color="#000000"> mass Mass_of_Sun]         </font><font color="#5a5a5a">; Monitor this slider always</font><font color="#000000">
   
   </font><font color="#0000aa">set</font><font color="#000000"> hood [</font><font color="#660096">who</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">other</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000">             </font><font color="#5a5a5a">; Get the IDs of your neighbors</font><font color="#000000">
   </font><font color="#0000aa">foreach</font><font color="#000000"> hood [                     
      </font><font color="#0000aa">set</font><font color="#000000"> deltax (([</font><font color="#660096">xcor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> ?) </font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">xcor</font><font color="#000000">) 
      </font><font color="#0000aa">set</font><font color="#000000"> deltay (([</font><font color="#660096">ycor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> ?) </font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">ycor</font><font color="#000000">) 
      </font><font color="#0000aa">set</font><font color="#000000"> r </font><font color="#660096">sqrt</font><font color="#000000"> (deltax </font><font color="#660096">*</font><font color="#000000"> deltax </font><font color="#660096">+</font><font color="#000000"> deltay </font><font color="#660096">*</font><font color="#000000"> deltay) 
      </font><font color="#0000aa">set</font><font color="#000000"> S r     
                                               </font><font color="#5a5a5a">; Newton's gravitational force law</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> F (G </font><font color="#660096">*</font><font color="#000000"> mass </font><font color="#660096">*</font><font color="#000000"> ([mass] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> ?) </font><font color="#660096">/</font><font color="#000000"> (r </font><font color="#660096">*</font><font color="#000000"> r))
      </font><font color="#0000aa">if</font><font color="#000000"> (F </font><font color="#660096">&gt;</font><font color="#000000"> FMAX) [</font><font color="#0000aa">set</font><font color="#000000"> F FMAX]
      </font><font color="#0000aa">set</font><font color="#000000"> Fx (F </font><font color="#660096">*</font><font color="#000000"> (deltax </font><font color="#660096">/</font><font color="#000000"> r))                </font><font color="#5a5a5a">; The x-component of force</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> Fy (F </font><font color="#660096">*</font><font color="#000000"> (deltay </font><font color="#660096">/</font><font color="#000000"> r))                </font><font color="#5a5a5a">; The y-component of force</font><font color="#000000">
   ]
   
   </font><font color="#0000aa">set</font><font color="#000000"> dvx DeltaT </font><font color="#660096">*</font><font color="#000000"> (Fx </font><font color="#660096">/</font><font color="#000000"> mass)
   </font><font color="#0000aa">set</font><font color="#000000"> dvy DeltaT </font><font color="#660096">*</font><font color="#000000"> (Fy </font><font color="#660096">/</font><font color="#000000"> mass)
   </font><font color="#0000aa">set</font><font color="#000000"> vx  (vx </font><font color="#660096">+</font><font color="#000000"> dvx)                          </font><font color="#5a5a5a">; The x-component of velocity</font><font color="#000000">
   </font><font color="#0000aa">set</font><font color="#000000"> vy  (vy </font><font color="#660096">+</font><font color="#000000"> dvy)                          </font><font color="#5a5a5a">; The y-component of velocity</font><font color="#000000">
   </font><font color="#0000aa">set</font><font color="#000000"> v </font><font color="#660096">sqrt</font><font color="#000000"> (vx </font><font color="#660096">*</font><font color="#000000"> vx </font><font color="#660096">+</font><font color="#000000"> vy </font><font color="#660096">*</font><font color="#000000"> vy)
   </font><font color="#0000aa">if</font><font color="#000000"> (v </font><font color="#660096">&gt;</font><font color="#000000"> VMAX) [</font><font color="#0000aa">set</font><font color="#000000"> vx (VMAX </font><font color="#660096">*</font><font color="#000000"> vx </font><font color="#660096">/</font><font color="#000000"> v) </font><font color="#0000aa">set</font><font color="#000000"> vy (VMAX </font><font color="#660096">*</font><font color="#000000"> vy </font><font color="#660096">/</font><font color="#000000"> v) </font><font color="#0000aa">set</font><font color="#000000"> v VMAX]

   </font><font color="#0000aa">set</font><font color="#000000"> deltax DeltaT </font><font color="#660096">*</font><font color="#000000"> vx
   </font><font color="#0000aa">set</font><font color="#000000"> deltay DeltaT </font><font color="#660096">*</font><font color="#000000"> vy 
   </font><font color="#0000aa">if</font><font color="#000000"> ((deltax </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">) </font><font color="#660096">or</font><font color="#000000"> (deltay </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">)) 
      [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> (</font><font color="#660096">atan</font><font color="#000000"> deltax deltay)]       </font><font color="#5a5a5a">; Because heading = 0 means turtle faces straight up!</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> move                                        </font><font color="#5a5a5a">; Move the turtle</font><font color="#000000">
   </font><font color="#0000aa">fd</font><font color="#000000"> (</font><font color="#660096">sqrt</font><font color="#000000"> (deltax </font><font color="#660096">*</font><font color="#000000"> deltax </font><font color="#660096">+</font><font color="#000000"> deltay </font><font color="#660096">*</font><font color="#000000"> deltay))

   </font><font color="#0000aa">set</font><font color="#000000"> lmx (mass </font><font color="#660096">*</font><font color="#000000"> vx)                         </font><font color="#5a5a5a">; Linear momentum of the turtle</font><font color="#000000">
   </font><font color="#0000aa">set</font><font color="#000000"> lmy (mass </font><font color="#660096">*</font><font color="#000000"> vy)
   
   </font><font color="#0000aa">set</font><font color="#000000"> ke (v </font><font color="#660096">*</font><font color="#000000"> v </font><font color="#660096">*</font><font color="#000000"> mass </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">)                   </font><font color="#5a5a5a">; Kinetic energy of the turtle</font><font color="#000000">
   </font><font color="#0000aa">set</font><font color="#000000"> lever_arm_x (</font><font color="#660096">xcor</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> center_of_mass_x)
   </font><font color="#0000aa">set</font><font color="#000000"> lever_arm_y (</font><font color="#660096">ycor</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> center_of_mass_y)
   </font><font color="#0000aa">set</font><font color="#000000"> lever_arm_r </font><font color="#660096">sqrt</font><font color="#000000"> (lever_arm_x </font><font color="#660096">*</font><font color="#000000"> lever_arm_x </font><font color="#660096">+</font><font color="#000000"> lever_arm_y </font><font color="#660096">*</font><font color="#000000"> lever_arm_y)
   </font><font color="#0000aa">if</font><font color="#000000"> (((vx </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">) </font><font color="#660096">or</font><font color="#000000"> (vy </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">)) </font><font color="#660096">and</font><font color="#000000"> ((lever_arm_x </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">) </font><font color="#660096">or</font><font color="#000000"> (lever_arm_y </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">)))
      [</font><font color="#0000aa">set</font><font color="#000000"> theta (</font><font color="#660096">atan</font><font color="#000000"> (mass </font><font color="#660096">*</font><font color="#000000"> vy) (mass </font><font color="#660096">*</font><font color="#000000"> vx)) </font><font color="#660096">-</font><font color="#000000"> (</font><font color="#660096">atan</font><font color="#000000"> lever_arm_y lever_arm_x)]
   </font><font color="#0000aa">set</font><font color="#000000"> angular_mom (lever_arm_r </font><font color="#660096">*</font><font color="#000000"> mass </font><font color="#660096">*</font><font color="#000000"> v </font><font color="#660096">*</font><font color="#000000"> (</font><font color="#660096">sin</font><font color="#000000"> theta)) </font><font color="#5a5a5a">; Angular momentum of the turtle</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> update-info                                 </font><font color="#5a5a5a">; Update information from the sliders</font><font color="#000000">
   </font><font color="#0000aa">set</font><font color="#000000"> G Gravitational_Constant
   </font><font color="#0000aa">set</font><font color="#000000"> FMAX Force_Maximum
   </font><font color="#0000aa">set</font><font color="#000000"> VMAX Velocity_Maximum
   </font><font color="#0000aa">set</font><font color="#000000"> DeltaT Time_Step
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> do-plots
   </font><font color="#0000aa">set-current-plot</font><font color="#000000"> </font><font color="#963700">&quot;Energy&quot;</font><font color="#000000">                   </font><font color="#5a5a5a">; Select the Energy plot</font><font color="#000000">
   </font><font color="#0000aa">set-current-plot-pen</font><font color="#000000"> </font><font color="#963700">&quot;Total&quot;</font><font color="#000000">                </font><font color="#5a5a5a">; Select the Total Energy Pen</font><font color="#000000">
   </font><font color="#0000aa">plot</font><font color="#000000"> total_energy                           </font><font color="#5a5a5a">; Plot the total_energy</font><font color="#000000">
   </font><font color="#0000aa">set-current-plot-pen</font><font color="#000000"> </font><font color="#963700">&quot;Potential&quot;</font><font color="#000000">
   </font><font color="#0000aa">plot</font><font color="#000000"> total_pe                               </font><font color="#5a5a5a">; Plot the potential energy</font><font color="#000000">
   </font><font color="#0000aa">set-current-plot-pen</font><font color="#000000"> </font><font color="#963700">&quot;Kinetic&quot;</font><font color="#000000">
   </font><font color="#0000aa">plot</font><font color="#000000"> total_ke                               </font><font color="#5a5a5a">; Plot the kinetic energy</font><font color="#000000">

   </font><font color="#0000aa">set-current-plot</font><font color="#000000"> </font><font color="#963700">&quot;Linear and Angular Momenta&quot;</font><font color="#000000">
   </font><font color="#0000aa">set-current-plot-pen</font><font color="#000000"> </font><font color="#963700">&quot;Lmx&quot;</font><font color="#000000">
   </font><font color="#0000aa">plot</font><font color="#000000"> total_lmx                              </font><font color="#5a5a5a">; Plot the linear momentum, x-component</font><font color="#000000">
   </font><font color="#0000aa">set-current-plot-pen</font><font color="#000000"> </font><font color="#963700">&quot;Lmy&quot;</font><font color="#000000">
   </font><font color="#0000aa">plot</font><font color="#000000"> total_lmy                              </font><font color="#5a5a5a">; Plot the linear momentum, y-component</font><font color="#000000">
   </font><font color="#0000aa">set-current-plot-pen</font><font color="#000000"> </font><font color="#963700">&quot;Angular&quot;</font><font color="#000000">
   </font><font color="#0000aa">plot</font><font color="#000000"> total_angular_mom                      </font><font color="#5a5a5a">; Plot the angular momentum</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">
</font>
</pre>

</body>
</html>
