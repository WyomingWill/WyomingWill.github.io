<html>
<head>
<title>dinos</title>
<style type="text/css">
<!--
/*
    This style sheet is borrowed from the NetLogo User Manual.  However, some of the units were
    changed from em to px because Java's StyleSheet support is limited for relative units such as
    em and % (this will supposively improve with newer versions of the VM) - jrn 7/21/05
    BE VERY VERY CAREFUL when you alter this style sheet -- it's possible to put in
    innocent-looking things that work on some VM's but cause Java exceptions on other for example
    we were using "font-size: 125%" but it caused Java exceptions on Java 1.5 on Windows - ST
    8/25/05
*/
:link { color: rgb(110,0,110); }
:visited { color: rgb(110,0,110); }
body {
    margin-left: 5px;
    font-family: arial, sans-serif;
    background: white;
    font-size: 12pt
}
h1 {
    color: white;
    background: rgb(45,0,45);
    font-size: 18pt;
    margin-bottom: 4px;
    padding-left: 6px;
    padding-right: 6px;
    padding-top: 6px;
    padding-bottom: 6px;
}
h2 {
    margin-top: 15px;
    margin-left: 6px;
    margin-bottom: 4px;
    background: rgb(166,172,255);
    font-size: 15pt;
    padding-left: 6px;
    padding-right: 6px;
    padding-top: 6px;
    padding-bottom: 6px;
}
h3 {
    margin-top: 15px;
    margin-left: 13px;
    margin-bottom: 4px;
    background: rgb(175,175,175);
    font-size: 12pt;
    padding: 0.2em;
    padding-left: 6px;
    padding-right: 6px;
    padding-top: 6px;
    padding-bottom: 6px;
}
h4 {
    margin-top: 15px;
    margin-bottom: 5px;
    margin-left: 15px;
    font-size: 12pt;
}
h5 {
    margin-top: 15px;
    margin-left: 15px;
    font-size: 12pt;
}
h6 {
    margin-top: 15px;
    margin-left: 15px;
    font-size: 12pt;
}
p {
    margin-left: 15px;
    margin-bottom: 3px;
}
pre {
    margin-left: 13px;
    background: rgb(225,225,225);
    font-family: monospace;
    font-size: 12pt;
    padding-left: 10px;
    padding-right: 3px;
    padding-top: 7px;
    padding-bottom: 7px;
    margin-top:9px;
    margin-bottom:0px;
}
code {
    font-family: monospace;
    font-size: 12pt;
}
blockquote {
    border: solid;
    border-style: solid;
    border-width: thin;
    border-color: black;
    background: rgb(250,250,220);
    padding-top: 0px;
    padding-bottom: 7px;
    margin-top: 7px;
    margin-bottom:1px;
}
ol {
   margin-bottom:1px;
}
ul {
   margin-bottom:1px;
}

-->
</style>
</head>
<body>

<p>This page was automatically generated by NetLogo 5.0.</p>

<p>The applet requires Java 5 or higher.
Java must be enabled in your browser settings.
Mac users must have Mac OS X 10.4 or higher.
Windows and Linux users may obtain the latest Java from
<a href="http://java.sun.com/getjava/download.html">Sun's Java site</a>.</p>

<p><hr>

<applet code="org.nlogo.lite.Applet"
        archive="NetLogoLite.jar"
        width="939" height="655">
  <param name="DefaultModel"
         value="dinos.nlogo">
  <param name="java_arguments"
         value="-Djnlp.packEnabled=true">
</applet>
</p>

<p>powered by
<a target="_blank" href="http://ccl.northwestern.edu/netlogo/">NetLogo</a></p>

<p>view/download model file:
<a href="dinos.nlogo">dinos.nlogo</a></p>
<h2>WHAT IS IT?</h2><p>This model is an extension of the &ldquo;split Newtonian&rdquo; (formation_newton.nlogo) physics-based model of a swarm, for the book entitled &ldquo;Physicomimetics: Physics-Based Swarm Intelligence.&rdquo; We consider an application of autonomous surface vehicles (called &ldquo;drones&rdquo;) that float in the ocean and other bodies of water containing dinoflagellates. Dinoflagellates are single-celled organisms that are bioluminescent (i.e., they produce light when disturbed). </p><p>We focus on two real-world tasks. In the first task, a swarm of drones should move towards a goal location, while touching as few dinoflagellates as possible. This is useful for military applications where stealth is desired. A warship, submarine, or special forces team moving through a bioluminescent &ldquo;hot spot&rdquo; can easily generate enough light (by disturbing dinoflagellates) to be seen from high points on a nearby shoreline or via aircraft or satellite. The objective of the drones is to find a path through the dinoflagellates that a larger vehicle can follow, while minimally disturbing the organisms.</p><p>On the other hand, many dinoflagellate species are responsible for harmful algal blooms (HABs). HABs can produce neurotoxins that are dangerous to other marine organisms and to people swimming in the water. Hence, our second task is to find a path towards a goal that maximizes the collection of dinoflagellates along the way - for the sake of creating a dinoflagellate density map that can be used to forecast the movement of HABs and warn swimmers away from hazardous areas.</p><h2>HOW IT WORKS</h2><p>Multiple drones use F = ma and a &ldquo;split Newtonian&rdquo; force law to self-organize into a triangular lattice and move towards a goal. Depending on how the simulation is run, the drones can either seek to maximize or minimize their exposure to the dinoflagellates, while moving towards the goal.</p><h2>WHAT IS NEW</h2><p>There are two levels of &ldquo;events&rdquo; in the simulation. At the lower level are dinoflagellates that move and leave deposits of chemical toxins in the water. At the higher level there are aquatic drones that can detect, and track or avoid, the chemical traces. </p><p>This simulation allows you to control the random number &ldquo;seed.&rdquo; The seed uniquely determines the sequence of random events in the simulation. Hence, if you run the simulation twice with the same seed, the results will be identical. This is important when properly designing scientific experiments.</p><p>The code automatically computes the proper value for the gravitational constant G, using the theory established in Chapter 3. It also provides theoretical guidance for the magnitude of the force that pulls the swarm towards the goal. </p><h2>HOW TO USE IT</h2><p>Click SETUP to initialize the drones and the initial positions of the dinoflagellates. Then, click RUN DINOS to make the dinoflagellates move and produce a chemical toxin for 100 time steps. Finally, click MOVE DRONES to have them move through the environment towards the goal. The simulation ends when a drone makes it to the goal.</p><p>The NUMBER_OF_DRONES slider allows you to control the number of aquatic drones created at initialization. Changing this slider while the simulation is running will have no effect.</p><p>The RANDOM_SEED slider sets the random seed at the beginning of the simulation. If you always use the same random seed, the simulation will run the same way (assuming all other parameters are kept the same). Changing this slider while the simulation is running will have no effect.</p><p>The NUMBER_OF_DINOS slider allows you to control the number of dinoflagellates created at initialization. Changing this slider while the simulation is running will have no effect.</p><p>All other sliders will affect the simulation when it is running.</p><p>The TOGGLE GOAL button allows you to toggle the goal force on and off. The default is for it to be turned on.</p><p>The TOGGLE MIN/MAX button allows you to control whether the drones attempt to find a path to the goal that minimizes or maximizes exposure to the toxin. The default is to try to find the maximum path.</p><h2>THINGS TO NOTICE</h2><p>Drones are initialized in a cluster at the top right of the graphics pane, and self-organize into a triangular lattice. The goal is placed at the lower left, in order to make the drones move through as much of the environment as possible.</p><p>At each time step, the center of mass of the drones is computed and the location is shown as a red dot on the graphics pane. The sequence of red dots shows the trajectory of the center of mass of the drones.</p><p>The GOAL FORCE THEORY monitor provides an estimate of the strength of the goal force that is required to successfully pull the drones through the environment to the goal.</p><p>The AVERAGE CHEMICAL SEEN monitor reports the average amount of chemical toxin measured by the drones.</p><h2>THINGS TO TRY</h2><p>Run the simulation and note how much chemical was measured by the drones. Then, keeping the random seed the same, click the TOGGLE MIN/MAX button, and rerun the experiment. How much chemical is measured now? </p><p>Repeat the above experiment with different random seeds.</p><p>Try different values for the goal force. What happens?</p><p>Try different values for the DESIRED_SEPARATION.</p><p>Try different values for the NUMBER_OF_DRONES. Does varying the number of drones alter the robots&rsquo; effectiveness at the two tasks (i.e., maximization and minimization of chemical encountered on the way to the goal)?</p><p>Vary the NUMBER_OF_DINOS and determine how this affects performance on the two tasks.</p><p>What is the difference between the role played by virtual friction (which is set by the FRICTION slider) and real friction that would be encountered between a drone and the water?<br/> How critical is virtual friction to mission success, and what level is needed for adequate performance?</p><p>In general, can you identify those parameter settings that result in (1) poor, (2) adequate, and (3) excellent performance at each of the two tasks? Explain why these parameter values lead to better/worse performance.</p><h2>EXTENDING THE MODEL</h2><p>Try adding obstacles, such as buoys to avoid, including obstacles of different sizes and shapes. See how this increases the difficulty of the tasks.</p><p>Introduce currents into the water that affect both the dinoflagellates and the drones. Run experiments that measure the drones&rsquo; performance as a function of the spatial and temporal extent, as well as the strength, of the currents.</p><p>Increase the number of agents beyond seven, and then test some of the hypotheses in Chapter 6 on your own. Create and then experimentally test new hypotheses that you invent based on your experiences with the simulator.</p><p>Note, in order to change any NetLogo simulation, you must have the source code (i.e., &ldquo;dinos.nlogo&rdquo;) downloaded to your computer, as well as NetLogo itself. You can not change the code when you are running the simulation with your browser.</p><h2>NETLOGO FEATURES</h2><h2>RELATED MODELS</h2><p>This is an extension of our generalized split Newtonian force law model, for real-world applications. </p><p>This model provides insight into how we might apply artificial physics for function optimization, which will be shown in &ldquo;apo.nlogo.&rdquo;</p><h2>CREDITS AND REFERENCES</h2><p>For a discussion of a more real-world faithful simulation of the dinoflagellates and drones (as well as a description of the physical drone), see:</p><p>Frey, C. Zarzhitsky, D., Spears, W. M., Spears, D. F., Karlsson, C., Ramos, B., Hamann, J., and Widder, E. (2008) A physicomimetics control framework for swarms of autonomous vehicles. In Proceedings of the Oceans&rsquo;08 Conference.</p><p>The NetLogo slime mold model is at:</p><p>Wilensky, U. (1997). NetLogo Slime model. <a href="http://ccl.northwestern.edu/netlogo/models/Slime">http://ccl.northwestern.edu/netlogo/models/Slime</a>. Center for Connected Learning and Computer-Based Modeling, Northwestern University, Evanston, IL.</p><h2>HOW TO CITE</h2><p>If you mention this model in an academic publication, we ask that you include these citations for the model itself and for the NetLogo software:<br/>- Spears, W. M. and Spears, D. F. (eds.) Physicomimetics: Physics-Based Swarm Intelligence, Springer-Verlag, (2011).<br/>- Wilensky, U. (1999). NetLogo. <a href="http://ccl.northwestern.edu/netlogo/">http://ccl.northwestern.edu/netlogo/</a>. Center for Connected Learning and Computer-Based Modeling, Northwestern University, Evanston, IL.</p><h2>COPYRIGHT NOTICE</h2><p>Copyright 2011 William M. Spears. All rights reserved.</p><p>Permission to use, modify or redistribute this model is hereby granted, provided that both of the following requirements are followed:<br/>a) this copyright notice is included, and<br/>b) this model will not be redistributed for profit without permission from William M. Spears. Contact William M. Spears for appropriate licenses for redistribution for profit.</p><p><a href="http://www.swarmotics.com">http://www.swarmotics.com</a></p>

<h1>CODE</h1>
<pre><font color="#5a5a5a">; William M. Spears and Christer Karlsson, September 2011</font><font color="#000000">
</font><font color="#5a5a5a">; Bioluminescence Tutorial Code</font><font color="#000000">
</font><font color="#5a5a5a">; The variable &quot;dinos&quot; refers to &quot;dinoflagellates&quot;</font><font color="#000000">
</font><font color="#5a5a5a">; For research and educational use only</font><font color="#000000">

</font><font color="#5a5a5a">; Version history</font><font color="#000000">
</font><font color="#5a5a5a">; Initial version of artificial physics by Brian Zuelke</font><font color="#000000">
</font><font color="#5a5a5a">; Extensive modifications by William M. Spears, September 2003</font><font color="#000000">
</font><font color="#5a5a5a">; Minor modifications to artificial physics by Christer Karlsson, February 2007</font><font color="#000000">
</font><font color="#5a5a5a">; Extensive modifications by Christer Karlsson, February - June 2007 </font><font color="#000000">

</font><font color="#660096">breed</font><font color="#000000"> [drones drone]                                  </font><font color="#5a5a5a">; Introduce the &quot;drone&quot; breed</font><font color="#000000">
</font><font color="#660096">breed</font><font color="#000000"> [goals goal]                                    </font><font color="#5a5a5a">; Introduce the &quot;goal&quot; breed</font><font color="#000000">
</font><font color="#660096">breed</font><font color="#000000"> [dinos dino]                                    </font><font color="#5a5a5a">; Introduce the &quot;dinoflagellates&quot; breed</font><font color="#000000">

</font><font color="#007f69">globals</font><font color="#000000"> [total_chemical G goal? goalF minimum? all_done? apoF 
         center_of_mass_x center_of_mass_y FR D FMAX DeltaT]

</font><font color="#007f69">turtles-own</font><font color="#000000"> [hood deltax deltay r F Fx Fy vx vy dvx dvy mass]

</font><font color="#007f69">patches-own</font><font color="#000000"> [chemical]

</font><font color="#007f69">to</font><font color="#000000"> setup
   </font><font color="#0000aa">clear-all</font><font color="#000000">                                          </font><font color="#5a5a5a">; Clear everything </font><font color="#000000">
   update-info
   </font><font color="#0000aa">random-seed</font><font color="#000000"> Random_Seed                            </font><font color="#5a5a5a">; Initialize the random number seed</font><font color="#000000">
                                                      </font><font color="#5a5a5a">; Create and initialize drones</font><font color="#000000">
   create-drones Number_of_Drones [setup-drones]
                                                      </font><font color="#5a5a5a">; Create the goal at lower left of graphics pane</font><font color="#000000">
   create-goals </font><font color="#963700">1</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">sky</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;circle&quot;</font><font color="#000000"> 
                   </font><font color="#0000aa">setxy</font><font color="#000000"> (</font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">world-width</font><font color="#000000"> </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2.5</font><font color="#000000">) (</font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">world-height</font><font color="#000000"> </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2.5</font><font color="#000000">)]
                                                      </font><font color="#5a5a5a">; Create and initialize dinoflagellates</font><font color="#000000">
   create-dinos Number_of_Dinos [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">yellow</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;circle&quot;</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> chemical </font><font color="#963700">2</font><font color="#000000">
                                 </font><font color="#0000aa">setxy</font><font color="#000000"> (</font><font color="#660096">random</font><font color="#000000"> </font><font color="#660096">world-height</font><font color="#000000">) (</font><font color="#660096">random</font><font color="#000000"> </font><font color="#660096">world-width</font><font color="#000000">)]
   </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> chemical </font><font color="#963700">0</font><font color="#000000">]                       </font><font color="#5a5a5a">; Initialize with no toxin anywhere</font><font color="#000000">
      
   </font><font color="#0000aa">set</font><font color="#000000"> goal? </font><font color="#963700">true</font><font color="#000000">                                     </font><font color="#5a5a5a">; Goal force is on</font><font color="#000000">
   </font><font color="#0000aa">set</font><font color="#000000"> minimum? </font><font color="#963700">false</font><font color="#000000">                                 </font><font color="#5a5a5a">; Maximum or minumum chemical concentration?</font><font color="#000000">
   </font><font color="#0000aa">set</font><font color="#000000"> all_done? </font><font color="#963700">false</font><font color="#000000">                                </font><font color="#5a5a5a">; Not done yet!</font><font color="#000000">
   </font><font color="#0000aa">set</font><font color="#000000"> total_chemical </font><font color="#963700">0</font><font color="#000000">                               </font><font color="#5a5a5a">; Initialize total amount of chemical seen</font><font color="#000000">
   </font><font color="#0000aa">set</font><font color="#000000"> apoF </font><font color="#963700">0.10</font><font color="#000000">                                      </font><font color="#5a5a5a">; Set APO force to 0.1 (see Chapter 6)</font><font color="#000000">
                                                      </font><font color="#5a5a5a">; Compute and display the center of mass of the drones</font><font color="#000000">
   </font><font color="#0000aa">set</font><font color="#000000"> center_of_mass_x (</font><font color="#660096">sum</font><font color="#000000"> [</font><font color="#660096">xcor</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> mass] </font><font color="#660096">of</font><font color="#000000"> drones) </font><font color="#660096">/</font><font color="#000000"> (</font><font color="#660096">sum</font><font color="#000000"> [mass] </font><font color="#660096">of</font><font color="#000000"> drones)
   </font><font color="#0000aa">set</font><font color="#000000"> center_of_mass_y (</font><font color="#660096">sum</font><font color="#000000"> [</font><font color="#660096">ycor</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> mass] </font><font color="#660096">of</font><font color="#000000"> drones) </font><font color="#660096">/</font><font color="#000000"> (</font><font color="#660096">sum</font><font color="#000000"> [mass] </font><font color="#660096">of</font><font color="#000000"> drones)
   </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patch</font><font color="#000000"> (</font><font color="#660096">round</font><font color="#000000"> center_of_mass_x) (</font><font color="#660096">round</font><font color="#000000"> center_of_mass_y) [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">red</font><font color="#000000">] 
   </font><font color="#0000aa">reset-ticks</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> run-dinos                                          </font><font color="#5a5a5a">; Runs dinoflagellates</font><font color="#000000">
   </font><font color="#0000aa">if</font><font color="#000000"> (</font><font color="#660096">count</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) [</font><font color="#0000aa">user-message</font><font color="#000000"> </font><font color="#963700">&quot;Please click HALT and then SETUP first&quot;</font><font color="#000000"> </font><font color="#0000aa">stop</font><font color="#000000">]
   </font><font color="#0000aa">repeat</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000"> [                                       
      </font><font color="#0000aa">diffuse</font><font color="#000000"> chemical </font><font color="#963700">1</font><font color="#000000">                              </font><font color="#5a5a5a">; For 100 steps, diffuse and evaporate the toxin</font><font color="#000000">
      </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> [</font><font color="#0000aa">set</font><font color="#000000"> chemical (chemical </font><font color="#660096">*</font><font color="#000000"> </font><font color="#963700">0.995</font><font color="#000000">) </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> (</font><font color="#660096">scale-color</font><font color="#000000"> </font><font color="#963700">green</font><font color="#000000"> chemical </font><font color="#963700">0</font><font color="#000000"> </font><font color="#963700">6</font><font color="#000000">)]
      </font><font color="#0000aa">ask</font><font color="#000000"> dinos [dino-life]                           </font><font color="#5a5a5a">; Move the dinoflagellates</font><font color="#000000">
      </font><font color="#0000aa">tick</font><font color="#000000">
   ]
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> run-and-monitor                                    </font><font color="#5a5a5a">; Runs and monitors the drones</font><font color="#000000">
   </font><font color="#0000aa">if</font><font color="#000000"> (</font><font color="#660096">count</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) [</font><font color="#0000aa">user-message</font><font color="#000000"> </font><font color="#963700">&quot;Please click HALT and then SETUP, and then RUN DINOS&quot;</font><font color="#000000"> </font><font color="#0000aa">stop</font><font color="#000000">]
   </font><font color="#0000aa">ifelse</font><font color="#000000"> (</font><font color="#660096">not</font><font color="#000000"> all_done?) [                           </font><font color="#5a5a5a">; Run until the goal is reached</font><font color="#000000">
      update-info
      </font><font color="#0000aa">set</font><font color="#000000"> G (</font><font color="#963700">0.9</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> FMAX </font><font color="#660096">*</font><font color="#000000"> (D </font><font color="#660096">^</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) </font><font color="#660096">/</font><font color="#000000"> (</font><font color="#963700">2</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> (</font><font color="#660096">sqrt</font><font color="#000000"> </font><font color="#963700">3</font><font color="#000000">)))   </font><font color="#5a5a5a">; The gravitational constant is set according to theory</font><font color="#000000">
      </font><font color="#0000aa">ask</font><font color="#000000"> drones [ap-drones]                          </font><font color="#5a5a5a">; All drones compute where to move</font><font color="#000000">
      </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000">   [move]                            </font><font color="#5a5a5a">; All drones move</font><font color="#000000">
     
                                                      </font><font color="#5a5a5a">; Compute and display the center of mass of the drones</font><font color="#000000">
      </font><font color="#0000aa">set</font><font color="#000000"> center_of_mass_x (</font><font color="#660096">sum</font><font color="#000000"> [</font><font color="#660096">xcor</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> mass] </font><font color="#660096">of</font><font color="#000000"> drones) </font><font color="#660096">/</font><font color="#000000"> (</font><font color="#660096">sum</font><font color="#000000"> [mass] </font><font color="#660096">of</font><font color="#000000"> drones)
      </font><font color="#0000aa">set</font><font color="#000000"> center_of_mass_y (</font><font color="#660096">sum</font><font color="#000000"> [</font><font color="#660096">ycor</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> mass] </font><font color="#660096">of</font><font color="#000000"> drones) </font><font color="#660096">/</font><font color="#000000"> (</font><font color="#660096">sum</font><font color="#000000"> [mass] </font><font color="#660096">of</font><font color="#000000"> drones)
      </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patch</font><font color="#000000"> (</font><font color="#660096">round</font><font color="#000000"> center_of_mass_x) (</font><font color="#660096">round</font><font color="#000000"> center_of_mass_y) [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">red</font><font color="#000000">]
      </font><font color="#0000aa">tick</font><font color="#000000">
   ]
   [</font><font color="#0000aa">stop</font><font color="#000000">]
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> setup-drones                                       </font><font color="#5a5a5a">; Setup the drones</font><font color="#000000">
   </font><font color="#0000aa">setxy</font><font color="#000000"> (</font><font color="#660096">world-width</font><font color="#000000"> </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2.5</font><font color="#000000">) (</font><font color="#660096">world-height</font><font color="#000000"> </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2.5</font><font color="#000000">)     </font><font color="#5a5a5a">; Place at upper right of graphics pane</font><font color="#000000">
   </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">360</font><font color="#000000">                             </font><font color="#5a5a5a">; Everyone has a random heading</font><font color="#000000">
   </font><font color="#0000aa">set</font><font color="#000000"> vx </font><font color="#963700">0</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> vy </font><font color="#963700">0</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> mass </font><font color="#963700">1</font><font color="#000000">                       </font><font color="#5a5a5a">; Start with no motion and mass = 1</font><font color="#000000">
   </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;circle&quot;</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">orange</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">
   </font><font color="#0000aa">ifelse</font><font color="#000000"> (</font><font color="#660096">who</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">) [] [                              </font><font color="#5a5a5a">; Carefully initialize the placement of the drones</font><font color="#000000">
      </font><font color="#0000aa">ifelse</font><font color="#000000"> (</font><font color="#660096">who</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) [</font><font color="#0000aa">setxy</font><font color="#000000"> (</font><font color="#660096">xcor</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) (</font><font color="#660096">ycor</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">)] [
         </font><font color="#0000aa">ifelse</font><font color="#000000"> (</font><font color="#660096">who</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">xcor</font><font color="#000000"> (</font><font color="#660096">xcor</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">)] [
            </font><font color="#0000aa">ifelse</font><font color="#000000"> (</font><font color="#660096">who</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">3</font><font color="#000000">) [</font><font color="#0000aa">setxy</font><font color="#000000"> (</font><font color="#660096">xcor</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) (</font><font color="#660096">ycor</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">)] [
               </font><font color="#0000aa">ifelse</font><font color="#000000"> (</font><font color="#660096">who</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">4</font><font color="#000000">) [</font><font color="#0000aa">setxy</font><font color="#000000"> (</font><font color="#660096">xcor</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) (</font><font color="#660096">ycor</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">)] [
                  </font><font color="#0000aa">ifelse</font><font color="#000000"> (</font><font color="#660096">who</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">5</font><font color="#000000">) [</font><font color="#0000aa">setxy</font><font color="#000000"> (</font><font color="#660096">xcor</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) (</font><font color="#660096">ycor</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">)] [
                     </font><font color="#0000aa">ifelse</font><font color="#000000"> (</font><font color="#660096">who</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">6</font><font color="#000000">) [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">xcor</font><font color="#000000"> (</font><font color="#660096">xcor</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">)] [
                  ]]]]]]]  
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> ap-drones                                          </font><font color="#5a5a5a">; Run artificial physics on the drones</font><font color="#000000">
   </font><font color="#0000aa">set</font><font color="#000000"> Fx </font><font color="#963700">0</font><font color="#000000"> </font><font color="#0000aa">set</font><font color="#000000"> Fy </font><font color="#963700">0</font><font color="#000000">                                  </font><font color="#5a5a5a">; Initialize force components to zero</font><font color="#000000">
   </font><font color="#0000aa">set</font><font color="#000000"> vx (</font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> FR) </font><font color="#660096">*</font><font color="#000000"> vx                               </font><font color="#5a5a5a">; Slow down according to friction</font><font color="#000000">
   </font><font color="#0000aa">set</font><font color="#000000"> vy (</font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> FR) </font><font color="#660096">*</font><font color="#000000"> vy 
   </font><font color="#0000aa">let</font><font color="#000000"> ncount </font><font color="#963700">0</font><font color="#000000">
   
   </font><font color="#0000aa">set</font><font color="#000000"> hood [</font><font color="#660096">who</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">other</font><font color="#000000"> drones                     </font><font color="#5a5a5a">; Get the IDs of all other drones</font><font color="#000000">
   </font><font color="#0000aa">foreach</font><font color="#000000"> hood [         
      </font><font color="#0000aa">set</font><font color="#000000"> deltax (([</font><font color="#660096">xcor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> drone ?) </font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">xcor</font><font color="#000000">) 
      </font><font color="#0000aa">set</font><font color="#000000"> deltay (([</font><font color="#660096">ycor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> drone ?) </font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">ycor</font><font color="#000000">) 
      </font><font color="#0000aa">set</font><font color="#000000"> r </font><font color="#660096">sqrt</font><font color="#000000"> (deltax </font><font color="#660096">*</font><font color="#000000"> deltax </font><font color="#660096">+</font><font color="#000000"> deltay </font><font color="#660096">*</font><font color="#000000"> deltay)
    
      </font><font color="#0000aa">if</font><font color="#000000"> (r </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">1.5</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> D) [                              </font><font color="#5a5a5a">; The generalized split Newtonian law</font><font color="#000000">
         </font><font color="#0000aa">set</font><font color="#000000"> ncount (ncount </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">)
         </font><font color="#0000aa">set</font><font color="#000000"> F (G </font><font color="#660096">*</font><font color="#000000"> mass </font><font color="#660096">*</font><font color="#000000"> ([mass] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">turtle</font><font color="#000000"> ?) </font><font color="#660096">/</font><font color="#000000"> (r </font><font color="#660096">^</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">)) 
         </font><font color="#0000aa">if</font><font color="#000000"> (F </font><font color="#660096">&gt;</font><font color="#000000"> FMAX) [</font><font color="#0000aa">set</font><font color="#000000"> F FMAX]                   </font><font color="#5a5a5a">; Bounds check on force magnitude</font><font color="#000000">
         </font><font color="#0000aa">ifelse</font><font color="#000000"> (r </font><font color="#660096">&gt;</font><font color="#000000"> D) 
            [</font><font color="#0000aa">set</font><font color="#000000"> Fx (Fx </font><font color="#660096">+</font><font color="#000000"> F </font><font color="#660096">*</font><font color="#000000"> (deltax </font><font color="#660096">/</font><font color="#000000"> r))           </font><font color="#5a5a5a">; Attractive force, x-component</font><font color="#000000">
             </font><font color="#0000aa">set</font><font color="#000000"> Fy (Fy </font><font color="#660096">+</font><font color="#000000"> F </font><font color="#660096">*</font><font color="#000000"> (deltay </font><font color="#660096">/</font><font color="#000000"> r))]          </font><font color="#5a5a5a">; Attractive force, y-component</font><font color="#000000">
            [</font><font color="#0000aa">set</font><font color="#000000"> Fx (Fx </font><font color="#660096">-</font><font color="#000000"> F </font><font color="#660096">*</font><font color="#000000"> (deltax </font><font color="#660096">/</font><font color="#000000"> r))           </font><font color="#5a5a5a">; Repulsive force, x-component</font><font color="#000000">
             </font><font color="#0000aa">set</font><font color="#000000"> Fy (Fy </font><font color="#660096">-</font><font color="#000000"> F </font><font color="#660096">*</font><font color="#000000"> (deltay </font><font color="#660096">/</font><font color="#000000"> r))]          </font><font color="#5a5a5a">; Repulsive force, y-component</font><font color="#000000">
            
         </font><font color="#5a5a5a">; Move towards chemical minimum or maximum</font><font color="#000000">
         </font><font color="#0000aa">ifelse</font><font color="#000000"> ((minimum? </font><font color="#660096">and</font><font color="#000000"> (chemical </font><font color="#660096">&lt;</font><font color="#000000"> ([chemical] </font><font color="#660096">of</font><font color="#000000"> drone ?))) </font><font color="#660096">or</font><font color="#000000">
                 ((</font><font color="#660096">not</font><font color="#000000"> minimum?) </font><font color="#660096">and</font><font color="#000000"> (chemical </font><font color="#660096">&gt;</font><font color="#000000"> ([chemical] </font><font color="#660096">of</font><font color="#000000"> drone ?))))
            [</font><font color="#0000aa">set</font><font color="#000000"> Fx (Fx </font><font color="#660096">-</font><font color="#000000"> (apoF </font><font color="#660096">*</font><font color="#000000"> (deltax </font><font color="#660096">/</font><font color="#000000"> r)))
             </font><font color="#0000aa">set</font><font color="#000000"> Fy (Fy </font><font color="#660096">-</font><font color="#000000"> (apoF </font><font color="#660096">*</font><font color="#000000"> (deltay </font><font color="#660096">/</font><font color="#000000"> r)))]
            [</font><font color="#0000aa">set</font><font color="#000000"> Fx (Fx </font><font color="#660096">+</font><font color="#000000"> (apoF </font><font color="#660096">*</font><font color="#000000"> (deltax </font><font color="#660096">/</font><font color="#000000"> r)))
             </font><font color="#0000aa">set</font><font color="#000000"> Fy (Fy </font><font color="#660096">+</font><font color="#000000"> (apoF </font><font color="#660096">*</font><font color="#000000"> (deltay </font><font color="#660096">/</font><font color="#000000"> r)))]
      ]
   ]
   </font><font color="#5a5a5a">; Now include goal force, if toggled on and more than one particle</font><font color="#000000">
   </font><font color="#0000aa">if</font><font color="#000000"> (goal? </font><font color="#660096">and</font><font color="#000000"> (ncount </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">)) [
      </font><font color="#0000aa">set</font><font color="#000000"> hood [</font><font color="#660096">who</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> goals                         </font><font color="#5a5a5a">; Get the IDs of the goal</font><font color="#000000">
      </font><font color="#0000aa">foreach</font><font color="#000000"> hood [         
         </font><font color="#0000aa">set</font><font color="#000000"> deltax (([</font><font color="#660096">xcor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> goal ?) </font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">xcor</font><font color="#000000">) 
         </font><font color="#0000aa">set</font><font color="#000000"> deltay (([</font><font color="#660096">ycor</font><font color="#000000">] </font><font color="#660096">of</font><font color="#000000"> goal ?) </font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">ycor</font><font color="#000000">) 
         </font><font color="#0000aa">set</font><font color="#000000"> r </font><font color="#660096">sqrt</font><font color="#000000"> (deltax </font><font color="#660096">*</font><font color="#000000"> deltax </font><font color="#660096">+</font><font color="#000000"> deltay </font><font color="#660096">*</font><font color="#000000"> deltay)
         </font><font color="#0000aa">if</font><font color="#000000"> (r </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) [</font><font color="#0000aa">set</font><font color="#000000"> all_done? </font><font color="#963700">true</font><font color="#000000">]              </font><font color="#5a5a5a">; Reached the goal</font><font color="#000000">
         </font><font color="#0000aa">set</font><font color="#000000"> Fx (Fx </font><font color="#660096">+</font><font color="#000000"> (goalF </font><font color="#660096">*</font><font color="#000000"> (deltax </font><font color="#660096">/</font><font color="#000000"> r)))         </font><font color="#5a5a5a">; Attractive force, x-component</font><font color="#000000">
         </font><font color="#0000aa">set</font><font color="#000000"> Fy (Fy </font><font color="#660096">+</font><font color="#000000"> (goalF </font><font color="#660096">*</font><font color="#000000"> (deltay </font><font color="#660096">/</font><font color="#000000"> r)))         </font><font color="#5a5a5a">; Attractive force, y-component</font><font color="#000000">
      ]
   ]
   
   </font><font color="#0000aa">set</font><font color="#000000"> total_chemical (total_chemical </font><font color="#660096">+</font><font color="#000000"> chemical)     </font><font color="#5a5a5a">; Keep track of all chemical seen</font><font color="#000000">
   
   </font><font color="#0000aa">set</font><font color="#000000"> dvx DeltaT </font><font color="#660096">*</font><font color="#000000"> (Fx </font><font color="#660096">/</font><font color="#000000"> mass)
   </font><font color="#0000aa">set</font><font color="#000000"> dvy DeltaT </font><font color="#660096">*</font><font color="#000000"> (Fy </font><font color="#660096">/</font><font color="#000000"> mass)
   </font><font color="#0000aa">set</font><font color="#000000"> vx  (vx </font><font color="#660096">+</font><font color="#000000"> dvx)                                 </font><font color="#5a5a5a">; The x-component of velocity</font><font color="#000000">
   </font><font color="#0000aa">set</font><font color="#000000"> vy  (vy </font><font color="#660096">+</font><font color="#000000"> dvy)                                 </font><font color="#5a5a5a">; The y-component of velocity</font><font color="#000000">

   </font><font color="#0000aa">set</font><font color="#000000"> deltax DeltaT </font><font color="#660096">*</font><font color="#000000"> vx
   </font><font color="#0000aa">set</font><font color="#000000"> deltay DeltaT </font><font color="#660096">*</font><font color="#000000"> vy 
   </font><font color="#0000aa">if</font><font color="#000000"> ((deltax </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">) </font><font color="#660096">or</font><font color="#000000"> (deltay </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">)) 
      [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> (</font><font color="#660096">atan</font><font color="#000000"> deltax deltay)] 
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> move
   </font><font color="#0000aa">fd</font><font color="#000000"> (</font><font color="#660096">sqrt</font><font color="#000000"> (deltax </font><font color="#660096">*</font><font color="#000000"> deltax </font><font color="#660096">+</font><font color="#000000"> deltay </font><font color="#660096">*</font><font color="#000000"> deltay))      </font><font color="#5a5a5a">; Move the drone</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#007f69">to</font><font color="#000000"> update-info                                        </font><font color="#5a5a5a">; Update information from the sliders</font><font color="#000000">
   </font><font color="#0000aa">set</font><font color="#000000"> FMAX Force_Maximum
   </font><font color="#0000aa">set</font><font color="#000000"> FR Friction
   </font><font color="#0000aa">set</font><font color="#000000"> DeltaT Time_Step
   </font><font color="#0000aa">set</font><font color="#000000"> D Desired_Separation
   </font><font color="#0000aa">set</font><font color="#000000"> goalF Goal_Force
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#5a5a5a">; Moves dinoflagellates. Really, the same model as the original Starlogo slime mold at </font><font color="#000000">
</font><font color="#5a5a5a">; http://education.mit.edu/starlogo/samples/slime.htm, which suffices for dinoflagellates.</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> dino-life   
   turn-toward-max-chemical                           </font><font color="#5a5a5a">; Turn towards maximum chemical concentration</font><font color="#000000">
   </font><font color="#0000aa">rt</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">40</font><font color="#000000">                                       </font><font color="#5a5a5a">; Make a random wiggle</font><font color="#000000">
   </font><font color="#0000aa">lt</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">40</font><font color="#000000">
   </font><font color="#0000aa">fd</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">                                               </font><font color="#5a5a5a">; Forward one step</font><font color="#000000">
   </font><font color="#0000aa">set</font><font color="#000000"> chemical chemical </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">                          </font><font color="#5a5a5a">; Replenish chemical</font><font color="#000000">
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#5a5a5a">; This portion of code is from the NetLogo code at http://ccl.northwestern.edu/netlogo/models/Slime</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> turn-toward-max-chemical
   </font><font color="#0000aa">let</font><font color="#000000"> ahead   [chemical] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-ahead</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">
   </font><font color="#0000aa">let</font><font color="#000000"> myright [chemical] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-right-and-ahead</font><font color="#000000"> </font><font color="#963700">45</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">
   </font><font color="#0000aa">let</font><font color="#000000"> myleft  [chemical] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">patch-left-and-ahead</font><font color="#000000"> </font><font color="#963700">45</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">
   </font><font color="#0000aa">ifelse</font><font color="#000000"> ((myright </font><font color="#660096">&gt;=</font><font color="#000000"> ahead) </font><font color="#660096">and</font><font color="#000000"> (myright </font><font color="#660096">&gt;=</font><font color="#000000"> myleft))
      [</font><font color="#0000aa">rt</font><font color="#000000"> </font><font color="#963700">45</font><font color="#000000">] 
      [</font><font color="#0000aa">if</font><font color="#000000"> (myleft </font><font color="#660096">&gt;=</font><font color="#000000"> ahead) [</font><font color="#0000aa">lt</font><font color="#000000"> </font><font color="#963700">45</font><font color="#000000">]]
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#5a5a5a">; Turn the goal force on or off</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> toggle-goal
   </font><font color="#0000aa">if</font><font color="#000000"> (goal? </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">) [</font><font color="#0000aa">set</font><font color="#000000"> goal? </font><font color="#660096">not</font><font color="#000000"> goal?]
</font><font color="#007f69">end</font><font color="#000000">

</font><font color="#5a5a5a">; Are the drones searching for maximum or minimum toxin?</font><font color="#000000">
</font><font color="#007f69">to</font><font color="#000000"> toggle-minmax
   </font><font color="#0000aa">if</font><font color="#000000"> (minimum? </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">) [</font><font color="#0000aa">set</font><font color="#000000"> minimum? </font><font color="#660096">not</font><font color="#000000"> minimum?]
</font><font color="#007f69">end</font><font color="#000000">
</font>
</pre>

</body>
</html>
